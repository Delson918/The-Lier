<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
  <title>The Lier</title>
  <style>
    body { 
      font-family: Arial, sans-serif; 
      margin: 0; 
      padding: 0; 
      background-color: #222;
      color: #eee;
    } 
    .page { 
      display: none; 
      padding: 20px; 
      min-height: 100vh;
      box-sizing: border-box;
      position: relative;
    }
    #pageA {
      background-color: #333;
    }
    #pageB {
      background-color: #444;
    }
    .active { display: block; }
    .box { 
      border: 1px solid #666; 
      padding: 15px; 
      margin: 15px 0; 
      background-color: rgba(0,0,0,0.3);
      border-radius: 5px;
    }
    .button { 
      padding: 8px 15px; 
      margin: 5px; 
      background-color: #555;
      color: white;
      border: 1px solid #777;
      border-radius: 3px;
      cursor: pointer;
    }
    .button:hover {
      background-color: #666;
    }
    .button:disabled {
      background-color: #333;
      cursor: not-allowed;
    }
    .topbar { 
      display: flex; 
      justify-content: space-between; 
      align-items: center; 
      border-bottom: 1px solid #666; 
      padding: 10px; 
    }
    .results { 
      height: 200px; 
      overflow-y: auto; 
      border: 1px solid #666; 
      padding: 10px; 
      margin-bottom: 10px; 
      background-color: rgba(0,0,0,0.2);
    }
    .hidden { display: none; }
    .quit-menu { 
      position: absolute; 
      top: 40px; 
      right: 20px; 
      border: 1px solid #666; 
      background: #333; 
      padding: 10px; 
      z-index: 100;
    }
    .input-cards { 
      display: flex; 
      gap: 10px; 
      margin-bottom: 10px;
      flex-wrap: wrap;
    }
    .card { 
      width: 40px; 
      height: 60px; 
      border: 1px solid #666; 
      display: inline-block; 
      background-color: rgba(255,255,255,0.1);
      cursor: pointer;
      position: relative;
      background-size: contain;
      background-repeat: no-repeat;
      background-position: center;
    }
    .card.selected {
      border: 2px solid gold;
      box-shadow: 0 0 10px gold;
    }
    .card.submitted {
      opacity: 0.5;
      filter: brightness(0.5);
      cursor: not-allowed;
    }
    .result-card {
      display: inline-block;
      width: 30px;
      height: 45px;
      border: 1px solid #666;
      margin: 2px;
      background-size: contain;
      background-repeat: no-repeat;
      background-position: center;
      background-color: rgba(255,255,255,0.1);
    }
    select, input {
      padding: 5px;
      background-color: #444;
      color: white;
      border: 1px solid #666;
      border-radius: 3px;
    }
    h2, h3 {
      color: #ddd;
    }
    #seedOutput {
      width: 120px;
    }
    .version {
      position: absolute;
      bottom: 10px;
      right: 10px;
      font-size: 12px;
      color: #999;
    }
    .gun-image {
      width: 30px;
      height: 30px;
      vertical-align: middle;
      margin-right: 5px;
    }
    .ammo-section {
      margin-top: 20px;
    }
    .result-row {
      margin: 5px 0;
    }
  </style>
</head>
<body>

<!-- Page A -->
<div id="pageA" class="page active">
  <h2>THE LIER</h2>
  
  <div class="box">
    <h3>Generate seed</h3>
    Number of players:
    <select id="numPlayers" required>
      <option value="" selected disabled>Please Select</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5</option>
      <option value="6">6</option>
      <option value="7">7</option>
      <option value="8">8</option>
    </select>
    <button class="button" onclick="generateSeed()">Generate</button><br>
    Seed: <input type="text" id="seedOutput" readonly>
    <button class="button" onclick="copySeed()">Copy</button>
  </div>
  
  <div class="box">
    <h3>Enter the seed</h3>
    Seed: <input type="text" id="seedInput"><br><br>
    I am the 
    <select id="playerNumber" required>
      <option value="" selected disabled>Please Select</option>
      <option value="1">1st</option>
      <option value="2">2nd</option>
      <option value="3">3rd</option>
      <option value="4">4th</option>
      <option value="5">5th</option>
      <option value="6">6th</option>
      <option value="7">7th</option>
      <option value="8">8th</option>
    </select> player
    <br><br>
    <button class="button" onclick="enterGame()">Enter the Game</button>
  </div>
  
  <div class="version">v0.0.4</div>
</div>

<!-- Page B -->
<div id="pageB" class="page">
  <div class="topbar">
    <h2>THE LIER</h2>
    <div>
      <button class="button" onclick="toggleMenu()">...</button>
      <div id="quitMenu" class="quit-menu hidden">
        <button class="button" onclick="quitGame()">Quit the game</button>
      </div>
    </div>
  </div>
  
  <div>
    <h3>Results:</h3>
    <div class="results" id="resultsBox">
      <div class="result-row">1. <span id="result1"></span></div>
      <div class="result-row">2. <span id="result2"></span></div>
      <div class="result-row">3. <span id="result3"></span></div>
      <div class="result-row">4. <span id="result4"></span></div>
      <div class="result-row">5. <span id="result5"></span></div>
    </div>
  </div>
  
  <div class="box">
    <h3>Your Hand</h3>
    <div class="input-cards" id="handCards">
      <!-- Hand cards will be dynamically added here -->
    </div>
    <button class="button" id="submitButton" onclick="submitCards()" disabled>Submit</button>
  </div>
  
  <div class="ammo-section">
    <img src="https://raw.githubusercontent.com/Delson918/The-Lier/main/gun.png" alt="Gun" class="gun-image">
    <span id="ammoCount">0 / 6</span><br>
    <button class="button" onclick="reload()">Reload</button>
    <button class="button" onclick="shoot()">Shoot</button>
  </div>
</div>

<script>
  let currentSeed = "";
  let currentPlayer = "";
  let ammo = 0;
  let selectedCards = [];
  let submittedCards = [];


  // Updated card configuration for 14 cards:
  // 4 Jokers (J1-J4), 4 Queens (Q1-Q4), 4 Kings (K1-K4), 1 Joker, 1 Ace
  const cardImages = {
    // Jokers
    'J1': 'https://raw.githubusercontent.com/Delson918/The-Lier/main/J1.png',
    'J2': 'https://raw.githubusercontent.com/Delson918/The-Lier/main/J2.png',
    'J3': 'https://raw.githubusercontent.com/Delson918/The-Lier/main/J3.png',
    'J4': 'https://raw.githubusercontent.com/Delson918/The-Lier/main/J4.png',
    
    // Queens
    'Q1': 'https://raw.githubusercontent.com/Delson918/The-Lier/main/Q1.png',
    'Q2': 'https://raw.githubusercontent.com/Delson918/The-Lier/main/Q2.png',
    'Q3': 'https://raw.githubusercontent.com/Delson918/The-Lier/main/Q3.png',
    'Q4': 'https://raw.githubusercontent.com/Delson918/The-Lier/main/Q4.png',
    
    // Kings
    'K1': 'https://raw.githubusercontent.com/Delson918/The-Lier/main/K1.png',
    'K2': 'https://raw.githubusercontent.com/Delson918/The-Lier/main/K2.png',
    'K3': 'https://raw.githubusercontent.com/Delson918/The-Lier/main/K3.png',
    'K4': 'https://raw.githubusercontent.com/Delson918/The-Lier/main/K4.png',
    
    // Special cards
    'Joker': 'https://raw.githubusercontent.com/Delson918/The-Lier/main/Joker.png',
    'A': 'https://raw.githubusercontent.com/Delson918/The-Lier/main/A.png'
  };

  // All valid card types
  const validCards = Object.keys(cardImages);

  // Initialize game with sample cards (replace with actual game logic)
  function initializeGame() {
    // Clear previous state
    document.getElementById('handCards').innerHTML = '';
    selectedCards = [];
    submittedCards = [];
    
    // Clear results (show empty slots)
    for (let i = 1; i <= 5; i++) {
      document.getElementById(`result${i}`).innerHTML = '';
    }
    
    // Deal sample hand (5 random cards from validCards)
    const hand = [];
    for (let i = 0; i < 5; i++) {
      const randomCard = validCards[Math.floor(Math.random() * validCards.length)];
      hand.push(randomCard);
    }
    
    // Create hand cards
    hand.forEach((card, index) => {
      const cardElement = document.createElement('div');
      cardElement.className = 'card';
      cardElement.dataset.index = index;
      cardElement.dataset.value = card;
      cardElement.style.backgroundImage = `url(${cardImages[card]})`;
      cardElement.onclick = () => toggleCardSelection(index);
      document.getElementById('handCards').appendChild(cardElement);
    });
    
    // Update submit button
    updateSubmitButton();
  }

  function toggleCardSelection(index) {
    const cardElement = document.querySelector(`.card[data-index="${index}"]`);
    
    // Skip if card is already submitted
    if (cardElement.classList.contains('submitted')) return;
    
    // Toggle selection
    if (selectedCards.includes(index)) {
      // Deselect
      selectedCards = selectedCards.filter(i => i !== index);
      cardElement.classList.remove('selected');
    } else {
      // Select (but max 3)
      if (selectedCards.length < 3) {
        selectedCards.push(index);
        cardElement.classList.add('selected');
      }
    }
    
    updateSubmitButton();
  }

  function updateSubmitButton() {
    const submitButton = document.getElementById('submitButton');
    submitButton.disabled = selectedCards.length === 0;
  }

  function submitCards() {
    if (selectedCards.length === 0 || selectedCards.length > 3) return;
    
    // Get selected card values
    const selectedValues = selectedCards.map(index => {
      return document.querySelector(`.card[data-index="${index}"]`).dataset.value;
    });
    
    // Mark cards as submitted
    selectedCards.forEach(index => {
      const cardElement = document.querySelector(`.card[data-index="${index}"]`);
      cardElement.classList.add('submitted');
      cardElement.classList.remove('selected');
      submittedCards.push(index);
    });
    
    // Add to results (find next empty slot)
    for (let i = 1; i <= 5; i++) {
      const resultSlot = document.getElementById(`result${i}`);
      if (resultSlot.innerHTML === '') {
        resultSlot.innerHTML = selectedValues.map(value => 
          `<div class="result-card" style="background-image: url(${cardImages[value]})"></div>`
        ).join('');
        break;
      }
    }
    
    // Scroll to bottom of results
    const resultsBox = document.getElementById('resultsBox');
    resultsBox.scrollTop = resultsBox.scrollHeight;
    
    // Clear selection
    selectedCards = [];
    updateSubmitButton();
    
    // Check if all cards submitted
    if (submittedCards.length >= 5) {
      document.getElementById('submitButton').disabled = true;
    }
  }

  function generateSeed() {
    let numPlayers = document.getElementById("numPlayers").value;
    if (!numPlayers) {
      alert("Please select number of players!");
      return;
    }
    currentSeed = Math.random().toString(36).substring(2, 8).toUpperCase() + "-" + numPlayers;
    document.getElementById("seedOutput").value = currentSeed;
  }

  function copySeed() {
    let seed = document.getElementById("seedOutput");
    if (!seed.value) {
      alert("No seed to copy! Generate one first.");
      return;
    }
    seed.select();
    document.execCommand("copy");
    alert("Seed copied: " + seed.value);
  }

  function enterGame() {
    let seedVal = document.getElementById("seedInput").value.trim();
    let playerNum = document.getElementById("playerNumber").value;
    
    if (!seedVal) {
      alert("Please enter a seed!");
      return;
    }
    if (!playerNum) {
      alert("Please select your player position!");
      return;
    }
    
    currentSeed = seedVal;
    currentPlayer = playerNum;
    document.getElementById("pageA").classList.remove("active");
    document.getElementById("pageB").classList.add("active");
    
    // Initialize game when entering
    initializeGame();
  }

  function toggleMenu() {
    document.getElementById("quitMenu").classList.toggle("hidden");
  }

  function quitGame() {
    document.getElementById("pageB").classList.remove("active");
    document.getElementById("pageA").classList.add("active");
    document.getElementById("quitMenu").classList.add("hidden");
  }

  function reload() {
    ammo = 6;
    updateAmmo();
  }

  function shoot() {
    if (ammo > 0) {
      ammo--;
      updateAmmo();
    } else {
      alert("No bullets! Reload first.");
    }
  }

  function updateAmmo() {
    document.getElementById("ammoCount").innerText = ammo + " / 6";
  }
</script>

</body>
</html>
